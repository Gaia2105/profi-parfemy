export class RegistrationPage {
  visit() {
    cy.visit('/registrace');  
  }

  closePopups() {
     
    cy.get('div.focus-cookiebara.active', { timeout: 3000 })
      .invoke('hide')
      

     
    cy.get('#login', { timeout: 3000 })
      .invoke('hide')
      
  }

  closeIncomakerPopup() {
    cy.wait(1000);  
    cy.get('iframe[src*="incomaker"]', { timeout: 30000 }).then(($iframe) => {
      const iframeBody = $iframe.contents().find('body');
      const $btn = iframeBody.find('.close_button');

      if ($btn.length > 0 && $btn.is(':visible')) {
        cy.wrap($btn).click({ force: true });
      }
    })
  }

  getEmailInput() {
    return cy.get('input[data-bv-field="email"]');
  }

  getPasswordInput() {
    return cy.get('input[data-bv-field="password"]');
  }

  getGenderSelect() {
    return cy.get('select[id="gender"]');
  }

  getBirthDateInput() {
    return cy.get('input[name="birthdate"]');
  }

  getFirstNameInput() {
    return cy.get('input[data-bv-field="name"]');
  }

  getLastNameInput() {
    return cy.get('input[data-bv-field="surname"]');
  }

  getPhoneInput() {
    return cy.get('input[data-bv-field="phone"]');
  }

  getAddressInput() {
    return cy.get('input[data-bv-field="street"]');
  }

  getCityInput() {
    return cy.get('input[data-bv-field="city"]');
  }

  getZipInput() {
    return cy.get('input[data-bv-field="zip"]');
  }

  getCountrySelect() {
    return cy.get('select[id="country"]');
  }
getPrivacyCheckbox1() {
    return cy.get('input[data-cookie-bar="simpleAccept"]');
  }
getSubmitButton() {
  return cy.get('input.btn.btn-primary[type="submit"]:visible');


}

  getPrivacyCheckbox() {
    return cy.get('input[data-cookie-bar="simpleAccept"]');
  }

  register(user: {
    email: string,
    password: string,
    gender: string,
    birthDate: string,
    firstName: string,
    lastName: string,
    phone: string,
    address: string,
    city: string,
    zip: string,
   
  }) {
    this.visit();
    this.closePopups();

    cy.get('form', { timeout: 10000 }).should('be.visible');

    this.getEmailInput().clear({ force: true }).type(user.email, { force: true });
    this.getPasswordInput().clear({ force: true }).type(user.password, { force: true });
    this.getGenderSelect().select(user.gender, { force: true });
    this.getBirthDateInput().clear().type(user.birthDate);
    this.getFirstNameInput().clear().type(user.firstName);
    this.getLastNameInput().clear().type(user.lastName);
    this.getPhoneInput().clear().type(user.phone);
    this.getPhoneInput().clear({ force: true, waitForAnimations: false }).type(user.phone, { force: true });

    this.getAddressInput().clear().type(user.address);
    this.getCityInput().clear().type(user.city);
    this.closeIncomakerPopup(); //  
    this.closePopups(); 
    this.getZipInput().clear({ force: true }).type(user.zip, { force: true });

     
    this.closeIncomakerPopup();  
    this.closePopups(); this.getSubmitButton().click({ force: true });
    this.closeIncomakerPopup();  
    this.closePopups();   
     

    this.closeIncomakerPopup();  
    this.closePopups(); {
     
    cy.get('div.focus-cookiebara.active', { timeout: 3000 })
      .invoke('hide')
        }
     cy.get('div.focus-cookiebara.active', { timeout: 3000 })
      .invoke('hide') 
    
    this.closeIncomakerPopup();
     
     
  this.closePopups();
  this.closeIncomakerPopup();
  }
    }















// export class RegistrationPage {
//   visit() {
//     cy.visit('/registrace'); // –ò–∑–º–µ–Ω–∏ –ø—É—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
//   }

//   closePopups() {
//     // –ó–∞–∫—Ä—ã—Ç—å cookie-–±–∞–Ω–Ω–µ—Ä, –µ—Å–ª–∏ –≤–∏–¥–∏–º
//     cy.get('div.focus-cookiebara.active', { timeout: 3000 })
//       .should('exist')
//       .invoke('hide')
//       // .catch(() => cy.log('Cookie bar not found or already hidden.'));

//     // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –≤—Ö–æ–¥–∞, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
//     cy.get('#login', { timeout: 3000 })
//       .should('exist')
//       .invoke('hide')
//       // .catch(() => cy.log('Login popup not found or already hidden.'));
//   }

//   closeIncomakerPopup() {
//     cy.wait(1000); // –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è iframe
//     cy.get('iframe[src*="incomaker"]', { timeout: 10000 }).then(($iframe) => {
//       const iframeBody = $iframe.contents().find('body');
//       const $btn = iframeBody.find('.close_button');

//       if ($btn.length > 0 && $btn.is(':visible')) {
//         cy.wrap($btn).click({ force: true });
//       }
//     // }).catch(() => {
//     //   cy.log('Incomaker popup not found, skipping...');
//     });
//   }

//   getEmailInput() {
//     return cy.get('input[data-bv-field="email"]');
//   }

//   getPasswordInput() {
//     return cy.get('input[data-bv-field="password"]');
//   }

//   getGenderSelect() {
//     return cy.get('select[id="gender"]');
//   }

//   getBirthDateInput() {
//     return cy.get('input[name="birthdate"]');
//   }

//   getFirstNameInput() {
//     return cy.get('input[data-bv-field="name"]');
//   }

//   getLastNameInput() {
//     return cy.get('input[data-bv-field="surname"]');
//   }

//   getPhoneInput() {
//     return cy.get('input[data-bv-field="phone"]');
//   }

//   getAddressInput() {
//     return cy.get('input[data-bv-field="street"]');
//   }

//   getCityInput() {
//     return cy.get('input[data-bv-field="city"]');
//   }

//   getZipInput() {
//     return cy.get('input[data-bv-field="zip"]');
//   }

//   getCountrySelect() {
//     return cy.get('select[id="country"]');
//   }

//   // getPrivacyCheckbox() {
//   //   return cy.get('input[data-cookie-bar="simpleAccept"]');
//   // }

//   getSubmitButton() {
//     return cy.get('button[data-callback="onComplete"]');
//   }

//   register(user: {
//     email: string,
//     password: string,
//     gender: string,
//     birthDate: string,
//     firstName: string,
//     lastName: string,
//     phone: string,
//     address: string,
//     city: string,
//     zip: string,
//     country: string
//   }) {
//     this.visit();
//     this.closePopups();

//     cy.get('form').should('be.visible');

//     this.getEmailInput().clear({ force: true }).type(user.email, { force: true });
//     this.getPasswordInput().clear({ force: true }).type(user.password, { force: true });
//     this.getGenderSelect().select(user.gender);
//     this.getBirthDateInput().clear().type(user.birthDate);
//     this.getFirstNameInput().clear().type(user.firstName);
//     this.getLastNameInput().clear().type(user.lastName);
//     this.getPhoneInput().clear().type(user.phone);
//     this.getAddressInput().clear().type(user.address);
//     this.getCityInput().clear().type(user.city);
//     this.getZipInput().clear().type(user.zip);
//     this.getCountrySelect().select(user.country, { force: true });

//     // this.getPrivacyCheckbox().check({ force: true });

//     this.closeIncomakerPopup(); // üëà –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∫–ª–∞–º–Ω—ã–π iframe

//     // this.getSubmitButton().click({ force: true });
//   }
// }







// export interface RegistrationUser {
//   email: string;
//   password: string;
//   gender: string;
//   birthDate: string;
//   firstName: string;
//   lastName: string;
//   phone: string;
//   address: string;
//   city: string;
//   zip: string;
//   country: string;
// }

// export class RegistrationPage {
//   visit() {
//     cy.visit('/registrace');
//   }

//   closePopups() {
//     // –£–¥–∞–ª—è–µ–º cookie-–±–ª–æ–∫, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
//     cy.get('body').then(($body) => {
//       if ($body.find('.focus-cookiebara').length > 0) {
//         cy.get('.focus-cookiebara').then(($el) => {
//           if ($el.is(':visible')) {
//             cy.wrap($el).invoke('remove');
//           }
//         });
//       }
//     });

//     // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞
//     cy.get('body').then(($body) => {
//       if ($body.find('#login').length > 0) {
//         cy.get('#login').invoke('hide');
//       }
//     });

//     // –ó–∞–∫—Ä—ã—Ç—å iframe —Å –∫–Ω–æ–ø–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
//     cy.get('iframe[src*="incomaker"]', { timeout: 3000 }).then(($iframe) => {
//       const body = $iframe.contents().find('body');
//       const closeButton = body.find('.close_button');

//       if (closeButton.length > 0 && closeButton.is(':visible')) {
//         cy.wrap(closeButton).click({ force: true });
//       }
//     // }).catch(() => {
//     //   // –ù–∏—á–µ–≥–æ ‚Äî iframe –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
//     });
//   }

//   getEmailInput() {
//     return cy.get('input[data-bv-field="email"]').first();
//   }

//   getPasswordInput() {
//     return cy.get('input[data-bv-field="password"]').first();
//   }

//   getGenderSelect() {
//     return cy.get('select[id="gender"]');
//   }

//   getBirthDateInput() {
//     return cy.get('input[name="birthdate"]');
//   }

//   getFirstNameInput() {
//     return cy.get('input[data-bv-field="name"]');
//   }

//   getLastNameInput() {
//     return cy.get('input[data-bv-field="surname"]');
//   }

//   getPhoneInput() {
//     return cy.get('input[data-bv-field="phone"]');
//   }

//   getAddressInput() {
//     return cy.get('input[data-bv-field="street"]');
//   }

//   getCityInput() {
//     return cy.get('input[data-bv-field="city"]');
//   }

//   getZipInput() {
//     return cy.get('input[data-bv-field="zip"]');
//   }

//   getCountrySelect() {
//     return cy.get('select[id="country"]');
//   }

//   // getPrivacyCheckbox() {
//   //   return cy.get('input[data-cookie-bar="simpleAccept"]');
//   // }

//   // getSubmitButton() {
//   //   return cy.get('button[data-callback="onComplete"]');
//   // }

//   register(user: RegistrationUser) {
//     this.visit();
//     this.closePopups();

//     cy.get('form').should('be.visible');

//     this.getEmailInput().clear({ force: true }).type(user.email, { force: true });
//     this.getPasswordInput().clear({ force: true }).type(user.password, { force: true });
//     this.getGenderSelect().select(user.gender);
//     this.getBirthDateInput().clear({ force: true }).type(user.birthDate);
//     this.getFirstNameInput().clear({ force: true }).type(user.firstName);
//     this.getLastNameInput().clear({ force: true }).type(user.lastName);
//     this.getPhoneInput().clear({ force: true }).type(user.phone);
//     this.getAddressInput().clear({ force: true }).type(user.address);
//     this.getCityInput().clear({ force: true }).type(user.city);
//     this.getZipInput().clear({ force: true }).type(user.zip);
//     this.getCountrySelect().select(user.country);
//     // this.getPrivacyCheckbox().check({ force: true });

//     // this.getSubmitButton().click({ force: true });
//   }
// }

















// export class RegistrationPage {
//   visit() {
//     cy.visit('/registrace'); // –∏–∑–º–µ–Ω–∏ –ø—É—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
//   }

// //   closePopups() {
// //     // –ó–∞–∫—Ä—ã—Ç—å cookie-–±–∞–Ω–Ω–µ—Ä
// //     cy.get('.focus-cookiebar', { timeout: 5000 }).then(($el) => {
// //       if ($el.is(':visible')) {
// //         cy.get('.focus-cookiebar').invoke('hide');
// //       }
// //     });

// //     // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –≤—Ö–æ–¥–∞
// //     cy.get('#login', { timeout: 5000 }).then(($el) => {
// //       if ($el.is(':visible')) {
// //         cy.get('#login').invoke('hide');
// //       }
// //     });

// //     // –ó–∞–∫—Ä—ã—Ç—å –¥—Ä—É–≥–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, .js-modal)
// //     // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
// // cy.get('.js-modal[class="cookiebara-wrapper focus-cookiebar"]', { timeout: 5000 })  // –¥–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –ø–æ—è–≤–ª–µ–Ω–∏–µ
// //   .then(($el) => {
// //     if ($el.is(':visible')) {
// //       cy.wrap($el).invoke('hide');  // —Å–∫—Ä—ã–≤–∞–µ–º
// //     }
// //   })
// //   // .catch(() => {
// //   //   // –æ–∫–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Äî –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
// //   // });

//   }

//   getEmailInput() {
//     return cy.get('input[data-bv-field="email"]').first();
//   }

//   getPasswordInput() {
//     return cy.get('input[data-bv-field="password"]').first();
//   }

//   getGenderSelect() {
//     return cy.get('select[id="gender"]');
//   }

//   getBirthDateInput() {
//     return cy.get('input[name="birthdate"]');
//   }

//   getFirstNameInput() {
//     return cy.get('input[data-bv-field="name"]');
//   }

//   getLastNameInput() {
//     return cy.get('input[data-bv-field="surname"]');
//   }

//   getPhoneInput() {
//     return cy.get('input[data-bv-field="phone"]');
//   }

//   getAddressInput() {
//     return cy.get('input[data-bv-field="street"]');
//   }

//   getCityInput() {
//     return cy.get('input[data-bv-field="city"]');
//   }

//   getZipInput() {
//     return cy.get('input[data-bv-field="zip"]');
//   }

//   getCountrySelect() {
//     return cy.get('select[id="country"]');
//   }

//   getPrivacyCheckbox() {
//     return cy.get('input[data-cookie-bar="simpleAccept"]');
//   }

//   getSubmitButton() {
//     return cy.get('button[data-callback="onComplete"]');
//   }
// closePopups() {
//   // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç—å cookie-–±–∞–Ω–Ω–µ—Ä, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
//   cy.get('body').then(($body) => {
//     if ($body.find('#cookieBar button.btn.btn-primary').length) {
//       cy.get('#cookieBar button.btn.btn-primary').click({ force: true });
//     }
//   });

//   // –ü–æ–ø—ã—Ç–∫–∞ —Å–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –≤—Ö–æ–¥–∞, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
//   cy.get('body').then(($body) => {
//     if ($body.find('#login').length) {
//       cy.get('#login').invoke('hide');
//     }
//   });

//   // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç—å iframe-–º–æ–¥–∞–ª–∫—É (Incomaker)
//   cy.get('iframe[src*="incomaker"]').then(($iframe) => {
//     const body = $iframe.contents().find('body');
//     if (body.find('.close_button').length) {
//       cy.wrap(body).find('.close_button').click({ force: true });
//     }
//   }).catch(() => {
//     // iframe –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
//   });
// }

//   register(user: RegistrationPage) {
//     this.visit();

//     this.closePopups(); // üëà –í–∞–∂–Ω–æ! –°–Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞

//     cy.get('form').should('be.visible'); // –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å

//     this.getEmailInput().clear().type(user.email, { force: true });
//     this.getPasswordInput().clear().type(user.password, { force: true });
//     this.getGenderSelect().select(user.gender);
//     this.getBirthDateInput().clear().type(user.birthDate);
//     this.getFirstNameInput().clear().type(user.firstName);
//     this.getLastNameInput().clear().type(user.lastName);
//     this.getPhoneInput().clear().type(user.phone);
//     this.getAddressInput().clear().type(user.address);
//     this.getCityInput().clear().type(user.city);
//     this.getZipInput().clear().type(user.zip);
//     this.getCountrySelect().select(user.country);

//     this.getPrivacyCheckbox().check({ force: true });

//     this.getSubmitButton().click({ force: true });
//   }
// }
 





// //     cy.visit('/registrace/');
// //   }

// //   getEmailInput() {
// //     return cy.get('input[data-bv-field="email"]').first();
// //   }

// //   getPasswordInput() {
// //     return cy.get('input[data-bv-field="password"]').first();
// //   }

// //   getGenderSelect() {
// //     return cy.get('select[id="gender"]');
// //   }

// //   getBirthDateInput() {
// //     return cy.get('input[name="birthdate"]');
// //   }

// //   getFirstNameInput() {
// //     return cy.get('input[data-bv-field="name"]');
// //   }

// //   getLastNameInput() {
// //     return cy.get('input[data-bv-field="surname"]');
// //   }

// //   getPhoneInput() {
// //     return cy.get('input[data-bv-field="phone"]');
// //   }

// //   getAddressInput() {
// //     return cy.get('input[data-bv-field="street"]');
// //   }

// //   getCityInput() {
// //     return cy.get('input[data-bv-field="city"]');
// //   }

// //   getZipInput() {
// //     return cy.get('input[data-bv-field="zip"]');
// //   }

// //   getCountrySelect() {
// //     return cy.get('select[id="country"]');
// //   }

// //   getPrivacyCheckbox() {
// //     return cy.get('input[data-cookie-bar="simpleAccept"]');
// //   }

// //   getSubmitButton() {
// //     return cy.get('button[data-callback="onComplete"]');
// //   }

// //   register(user:RegistrationPage) {
// //     this.visit();

// //     this.getEmailInput().clear().type(user.email, { force: true });
// //     this.getPasswordInput().clear().type(user.password, { force: true });
// //     this.getGenderSelect().select(user.gender);
// //     this.getBirthDateInput().clear().type(user.birthDate);
// //     this.getFirstNameInput().clear().type(user.firstName);
// //     this.getLastNameInput().clear().type(user.lastName);
// //     this.getPhoneInput().clear().type(user.phone);
// //     this.getAddressInput().clear().type(user.address);
// //     this.getCityInput().clear().type(user.city);
// //     this.getZipInput().clear().type(user.zip);
// //     this.getCountrySelect().select(user.country);

// //     // –°—Ç–∞–≤–∏–º –≥–∞–ª–æ—á–∫—É —Å–æ–≥–ª–∞—Å–∏—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
// //     this.getPrivacyCheckbox().check({ force: true });

// //     this.getSubmitButton().click({ force: true });
// //   }
// // }

















// //   fillForm(user: any) {
// //     cy.get('#form-field-first_name').type(user.firstName);
// //     cy.get('#form-field-last_name').type(user.lastName);
// //     cy.get('#form-field-email').type(user.email);
// //     cy.get('#form-field-password').type(user.password);
// //     cy.get('#form-field-password_repeat').type(user.password);
// //   }

// //   submit() {
// //     cy.get('button[type=submit]').click();
// //   }
// // }
// // export class RegistrationPage {
// //   fillEmail(email: string) {
// //     throw new Error('Method not implemented.');
// //   }
// //   fillPassword(password: string) {
// //     throw new Error('Method not implemented.');
// //   }
// //   fillConfirmPassword(password: string) {
// //     throw new Error('Method not implemented.');
// //   }
// //   fillForm(user: any) {
// //     throw new Error("Method not implemented.");
// //   }
// //   submit() {
// //     throw new Error("Method not implemented.");
// //   }
// //   visit() {
// //     cy.visit('/registrace/');

// //     // –°–∫—Ä—ã—Ç—å cookie-–±–∞–Ω–Ω–µ—Ä, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
// //     cy.get('.focus-cookiebara').then(($el) => {
// //       if ($el.is(':visible')) {
// //         cy.wrap($el).invoke('hide');
// //       }
// //     })
//   // }

// // export interface RegistrationUser {
// //     email: string;
// //     password: string;
// //     gender: string;
// //     birthDate: string;
// //     firstName: string;
// //     lastName: string;
// //     phone: string;
// //     address: string;
// //     city: string;
// //     zip: string;
// //     country: string;
// // }